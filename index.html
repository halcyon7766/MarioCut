<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>マリオカート ショートカット ファインダー</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
        }
        #result-container {
            transition: all 0.3s ease-in-out;
        }
        .aspect-w-16 {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 */
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-5xl">
        
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-blue-600">マリオカート ショートカット ファインダー</h1>
            <p class="text-gray-600 mt-2">コースとショートカットを選択して、複数の攻略法をチェック！</p>
        </header>

        <main class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg">
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <div>
                    <label for="course-select" class="block text-sm font-medium text-gray-700 mb-2">1. コースを選択</label>
                    <select id="course-select" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                        <option value="">コースを選んでください</option>
                    </select>
                </div>
                <div>
                    <label for="shortcut-select" class="block text-sm font-medium text-gray-700 mb-2">2. ショートカットを選択</label>
                    <select id="shortcut-select" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" disabled>
                        <option value="">先にコースを選んでください</option>
                    </select>
                </div>
            </div>

            <div id="result-container" class="bg-gray-50 p-6 rounded-lg min-h-[200px] flex items-center justify-center">
                <p id="result-placeholder" class="text-gray-500 text-center">ここに選択したショートカットの情報が表示されます。</p>
                <div id="result-content" class="hidden w-full">
                    </div>
            </div>

        </main>

        <footer class="text-center mt-8 text-sm text-gray-500">
            <p>&copy; 2024 halcyon7766</p>
        </footer>
    </div>

    <script>
        // --- データ部分 ---
        // 外部ファイル読み込みをやめ、HTML内に直接データを記述することで問題を解消します。
        const shortcutData = [
          {
            "course": "マリオサーキット",
            "shortcuts": [
              {
                "name": "最終コーナー",
                "methods": [
                  {
                    "type": "キノコ使用",
                    "videoType": "youtube",
                    "videoSource": "dQw4w9WgXcQ",
                    "description": "最終コーナー手前のダートエリアを、キノコを使って突っ切ります。\nタイムを大幅に短縮できる定番のショートカットです。"
                  },
                  {
                    "type": "NISC (アイテムなし)",
                    "videoType": "youtube",
                    "videoSource": "o-YBDTqX_ZU",
                    "description": "アイテムを使わず、特定の角度で壁にぶつかりジャンプすることでショートカットします。高度なテクニックが必要です。"
                  }
                ]
              }
            ]
          },
          {
            "course": "モーモーカントリー",
            "shortcuts": [
              {
                "name": "牧草地",
                "methods": [
                  {
                    "type": "キノコ使用",
                    "videoType": "youtube",
                    "videoSource": "3tmd-ClpJxA",
                    "description": "スタート直後の大きなカーブを曲がらず、キノコを使って牧草地をまっすぐ進みます。\n牛にぶつからないように注意が必要です。"
                  }
                ]
              }
            ]
          },
          {
            "course": "キノピオハーバー",
            "shortcuts": [
              {
                "name": "市場の屋根上",
                "methods": [
                  {
                    "type": "通常ルート",
                    "videoType": "youtube",
                    "videoSource": "G8iEMVr7GFo",
                    "description": "市場のエリアで、ジャンプ台を使って屋根の上を走るルートです。\nコインも回収でき、直線的に進めます。"
                  }
                ]
              }
            ]
          },
          {
            "course": "トロフィーシティ",
            "shortcuts": [
              {
                "name": "DKうちゅうセンター",
                "methods": [
                  {
                    "type": "NISC",
                    "videoType": "mp4",
                    "videoSource": "https://video.twimg.com/amplify_video/1956987521390505984/vid/avc1/1280x720/zVscxg-dN2oSNmwL.mp4?tag=14",
                    "description": "DKうちゅうセンターへ向かう反重力エリアでのショートカット。コースの壁を利用してジャンプします。"
                  },
                  {
                    "type": "キノコ使用",
                    "videoType": "mp4",
                    "videoSource": "https://video.twimg.com/amplify_video/1956998418578178048/vid/avc1/1280x720/1au4LSvkmh0j0FeA.mp4?tag=14",
                    "description": "DKうちゅうセンターへ向かう反重力エリアでのショートカット。"
                  }
                ]
              }
            ]
          }
        ];

        // --- DOM要素の取得 ---
        const courseSelect = document.getElementById('course-select');
        const shortcutSelect = document.getElementById('shortcut-select');
        const resultPlaceholder = document.getElementById('result-placeholder');
        const resultContent = document.getElementById('result-content');

        // --- 初期化処理 ---
        document.addEventListener('DOMContentLoaded', () => {
            // データを直接利用するため、fetch処理は不要
            shortcutData.forEach(data => {
                const option = document.createElement('option');
                option.value = data.course;
                option.textContent = data.course;
                courseSelect.appendChild(option);
            });
            
            // イベントリスナーを設定
            courseSelect.addEventListener('change', handleCourseChange);
            shortcutSelect.addEventListener('change', handleShortcutChange);
        });

        // --- イベントハンドラ関数 ---
        function handleCourseChange() {
            const selectedCourse = courseSelect.value;
            shortcutSelect.innerHTML = '';
            shortcutSelect.disabled = true;
            hideResult();

            if (selectedCourse) {
                const defaultOption = document.createElement('option');
                defaultOption.value = "";
                defaultOption.textContent = "ショートカットを選んでください";
                shortcutSelect.appendChild(defaultOption);

                const courseData = shortcutData.find(data => data.course === selectedCourse);
                if (courseData) {
                    courseData.shortcuts.forEach(shortcut => {
                        const option = document.createElement('option');
                        option.value = shortcut.name;
                        option.textContent = shortcut.name;
                        shortcutSelect.appendChild(option);
                    });
                    shortcutSelect.disabled = false;
                }
            } else {
                const defaultOption = document.createElement('option');
                defaultOption.value = "";
                defaultOption.textContent = "先にコースを選んでください";
                shortcutSelect.appendChild(defaultOption);
            }
        }

        function handleShortcutChange() {
            const selectedCourse = courseSelect.value;
            const selectedShortcutName = shortcutSelect.value;

            if (selectedCourse && selectedShortcutName) {
                const courseData = shortcutData.find(data => data.course === selectedCourse);
                const shortcutInfo = courseData.shortcuts.find(s => s.name === selectedShortcutName);

                if (shortcutInfo) {
                    displayResult(shortcutInfo);
                }
            } else {
                hideResult();
            }
        }

        // --- 表示更新関数 ---
        /**
         * 複数の攻略法を並べて表示する
         * @param {object} shortcut - 表示するショートカットの情報 (methods配列を含む)
         */
        function displayResult(shortcut) {
            resultContent.innerHTML = ''; // 以前の結果をクリア

            const container = document.createElement('div');
            // 攻略法が1つの場合は1列、2つ以上なら2列で表示
            const gridColsClass = shortcut.methods.length > 1 ? 'md:grid-cols-2' : 'md:grid-cols-1';
            container.className = `grid grid-cols-1 ${gridColsClass} gap-6`;

            shortcut.methods.forEach(method => {
                let videoElementHTML = '';
                if (method.videoType === 'youtube') {
                    videoElementHTML = `<iframe class="absolute top-0 left-0 w-full h-full" src="https://www.youtube.com/embed/${method.videoSource}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
                } else if (method.videoType === 'mp4') {
                    videoElementHTML = `<video class="absolute top-0 left-0 w-full h-full object-cover" src="${method.videoSource}" controls autoplay muted loop playsinline>お使いのブラウザは動画の再生に対応していません。</video>`;
                }

                const methodHTML = `
                    <div>
                        <h3 class="text-xl font-bold mb-3 text-gray-800">${method.type}</h3>
                        <div class="aspect-w-16 mb-4 rounded-lg overflow-hidden shadow-md bg-black">
                            ${videoElementHTML}
                        </div>
                        <p class="text-gray-700 leading-relaxed whitespace-pre-wrap">${method.description}</p>
                    </div>
                `;
                container.innerHTML += methodHTML;
            });

            resultContent.appendChild(container);
            resultPlaceholder.classList.add('hidden');
            resultContent.classList.remove('hidden');
        }

        function hideResult() {
            resultPlaceholder.classList.remove('hidden');
            resultContent.classList.add('hidden');
            resultContent.innerHTML = '';
        }
    </script>
</body>
</html>

